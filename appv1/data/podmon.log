2025-04-15 12:28:57,911 - ERROR - Erro ao enviar alerta: name 'subject' is not defined
2025-04-15 12:28:57,949 - INFO - Successfully connected to Kubernetes API
2025-04-15 12:28:58,201 - INFO - Database setup completed successfully
2025-04-15 12:28:58,201 - INFO - Database connection verified
2025-04-15 12:28:58,202 - INFO - Database initialized successfully
2025-04-15 12:28:58,222 - INFO - Configuration saved successfully
2025-04-15 12:28:58,227 - INFO - Scheduled automatic cleanup with 30 days retention
2025-04-15 12:28:58,227 - INFO - PodMonitor initialized successfully
2025-04-15 12:28:58,230 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.244.1.62:5000
2025-04-15 12:28:58,230 - INFO - [33mPress CTRL+C to quit[0m
2025-04-15 12:28:58,571 - ERROR - Query execution failed: INSERT INTO pod_ports (
                            pod_name, namespace, port_number, protocol,
                            is_exposed, service_name, external_ip
                        ) VALUES (?, ?, ?, ?, ?, ?, ?)
Error: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:28:58,571 - ERROR - Error saving pod ports: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:28:58,571 - ERROR - Error getting port information: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:28:58,750 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-6pmlr
2025-04-15 12:28:58,859 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:28:58,873 - INFO - Using container blackbox-exporter for disk usage check in pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:28:59,140 - INFO - Metrics saved for pod blackbox-exporter-7645c7c966-drsjx in namespace monitoring
2025-04-15 12:28:59,241 - INFO - Port information saved for pod dpl-podmon-667d4dc94-zxkfr
2025-04-15 12:28:59,419 - INFO - Using container podmon-monitor for disk usage check in pod dpl-podmon-667d4dc94-zxkfr
2025-04-15 12:28:59,537 - INFO - Metrics saved for pod dpl-podmon-667d4dc94-zxkfr in namespace monitoring
2025-04-15 12:28:59,649 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-8xcq5
2025-04-15 12:28:59,757 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:28:59,773 - INFO - Using container kube-state-metrics for disk usage check in pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:28:59,848 - WARNING - Invalid or empty disk usage data from pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:28:59,858 - INFO - Metrics saved for pod kube-state-metrics-66f58b585d-qvzh5 in namespace monitoring
2025-04-15 12:28:59,943 - INFO - Port information saved for pod node-exporter-48qtz
2025-04-15 12:28:59,960 - INFO - Using container node-exporter for disk usage check in pod node-exporter-48qtz
2025-04-15 12:29:00,048 - INFO - Metrics saved for pod node-exporter-48qtz in namespace monitoring
2025-04-15 12:29:00,141 - INFO - Port information saved for pod node-exporter-5bd2g
2025-04-15 12:29:00,158 - INFO - Using container node-exporter for disk usage check in pod node-exporter-5bd2g
2025-04-15 12:29:00,313 - INFO - Metrics saved for pod node-exporter-5bd2g in namespace monitoring
2025-04-15 12:29:00,405 - INFO - Port information saved for pod node-exporter-zqtjl
2025-04-15 12:29:00,422 - INFO - Using container node-exporter for disk usage check in pod node-exporter-zqtjl
2025-04-15 12:29:00,702 - INFO - Metrics saved for pod node-exporter-zqtjl in namespace monitoring
2025-04-15 12:29:00,808 - INFO - Port information saved for pod prometheus-k8s-0
2025-04-15 12:29:01,219 - INFO - Node statistics saved for 3 nodes
2025-04-15 12:31:13,942 - INFO - 10.244.0.0 - - [15/Apr/2025 12:31:13] "GET / HTTP/1.1" 200 -
2025-04-15 12:31:14,534 - INFO - 10.244.0.0 - - [15/Apr/2025 12:31:14] "GET / HTTP/1.1" 200 -
2025-04-15 12:31:14,602 - INFO - 10.244.0.0 - - [15/Apr/2025 12:31:14] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-15 12:31:14,602 - INFO - 10.244.0.0 - - [15/Apr/2025 12:31:14] "GET /static/js/script.js HTTP/1.1" 200 -
2025-04-15 12:31:14,639 - INFO - 10.244.0.0 - - [15/Apr/2025 12:31:14] "GET /static/css/style.css HTTP/1.1" 200 -
2025-04-15 12:31:14,646 - INFO - 10.244.0.0 - - [15/Apr/2025 12:31:14] "GET /static/js/script.js HTTP/1.1" 200 -
2025-04-15 12:31:14,848 - INFO - 10.244.0.0 - - [15/Apr/2025 12:31:14] "GET /api/config HTTP/1.1" 200 -
2025-04-15 12:31:15,113 - INFO - 10.244.0.0 - - [15/Apr/2025 12:31:15] "GET /api/history?days=7 HTTP/1.1" 200 -
2025-04-15 12:31:15,721 - ERROR - Query execution failed: INSERT INTO pod_ports (
                            pod_name, namespace, port_number, protocol,
                            is_exposed, service_name, external_ip
                        ) VALUES (?, ?, ?, ?, ?, ?, ?)
Error: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:31:15,722 - ERROR - Error saving pod ports: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:31:15,722 - ERROR - Error getting port information: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:31:15,760 - INFO - Node statistics saved for 3 nodes
2025-04-15 12:31:15,764 - INFO - 10.244.0.0 - - [15/Apr/2025 12:31:15] "GET /api/nodes HTTP/1.1" 200 -
2025-04-15 12:31:15,820 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-6pmlr
2025-04-15 12:31:15,954 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:31:15,970 - INFO - Using container blackbox-exporter for disk usage check in pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:31:16,444 - INFO - Metrics saved for pod blackbox-exporter-7645c7c966-drsjx in namespace monitoring
2025-04-15 12:31:16,558 - INFO - Port information saved for pod dpl-podmon-667d4dc94-zxkfr
2025-04-15 12:31:16,571 - INFO - Using container podmon-monitor for disk usage check in pod dpl-podmon-667d4dc94-zxkfr
2025-04-15 12:31:16,651 - INFO - Metrics saved for pod dpl-podmon-667d4dc94-zxkfr in namespace monitoring
2025-04-15 12:31:16,763 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-8xcq5
2025-04-15 12:31:16,881 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:31:16,906 - INFO - Using container kube-state-metrics for disk usage check in pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:31:16,985 - WARNING - Invalid or empty disk usage data from pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:31:16,996 - INFO - Metrics saved for pod kube-state-metrics-66f58b585d-qvzh5 in namespace monitoring
2025-04-15 12:31:17,089 - INFO - Port information saved for pod node-exporter-48qtz
2025-04-15 12:31:17,105 - INFO - Using container node-exporter for disk usage check in pod node-exporter-48qtz
2025-04-15 12:31:17,194 - INFO - Metrics saved for pod node-exporter-48qtz in namespace monitoring
2025-04-15 12:31:17,287 - INFO - Port information saved for pod node-exporter-5bd2g
2025-04-15 12:31:17,304 - INFO - Using container node-exporter for disk usage check in pod node-exporter-5bd2g
2025-04-15 12:31:17,390 - INFO - Metrics saved for pod node-exporter-5bd2g in namespace monitoring
2025-04-15 12:31:17,491 - INFO - Port information saved for pod node-exporter-zqtjl
2025-04-15 12:31:17,510 - INFO - Using container node-exporter for disk usage check in pod node-exporter-zqtjl
2025-04-15 12:31:17,698 - INFO - Metrics saved for pod node-exporter-zqtjl in namespace monitoring
2025-04-15 12:31:17,805 - INFO - Port information saved for pod prometheus-k8s-0
2025-04-15 12:31:17,868 - INFO - 10.244.0.0 - - [15/Apr/2025 12:31:17] "GET /api/pods HTTP/1.1" 200 -
2025-04-15 12:31:17,889 - ERROR - Unhandled error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
2025-04-15 12:31:17,889 - INFO - 10.244.0.0 - - [15/Apr/2025 12:31:17] "[35m[1mGET /api/storage/info HTTP/1.1[0m" 500 -
2025-04-15 12:39:01,619 - ERROR - Query execution failed: INSERT INTO pod_ports (
                            pod_name, namespace, port_number, protocol,
                            is_exposed, service_name, external_ip
                        ) VALUES (?, ?, ?, ?, ?, ?, ?)
Error: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:39:01,619 - ERROR - Error saving pod ports: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:39:01,619 - ERROR - Error getting port information: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:39:01,777 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-6pmlr
2025-04-15 12:39:01,908 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:39:01,924 - INFO - Using container blackbox-exporter for disk usage check in pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:39:02,341 - INFO - Metrics saved for pod blackbox-exporter-7645c7c966-drsjx in namespace monitoring
2025-04-15 12:39:02,452 - INFO - Port information saved for pod dpl-podmon-667d4dc94-zxkfr
2025-04-15 12:39:02,504 - INFO - Using container podmon-monitor for disk usage check in pod dpl-podmon-667d4dc94-zxkfr
2025-04-15 12:39:02,593 - INFO - Metrics saved for pod dpl-podmon-667d4dc94-zxkfr in namespace monitoring
2025-04-15 12:39:02,704 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-8xcq5
2025-04-15 12:39:02,886 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:39:02,903 - INFO - Using container kube-state-metrics for disk usage check in pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:39:02,979 - WARNING - Invalid or empty disk usage data from pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:39:02,995 - INFO - Metrics saved for pod kube-state-metrics-66f58b585d-qvzh5 in namespace monitoring
2025-04-15 12:39:03,087 - INFO - Port information saved for pod node-exporter-48qtz
2025-04-15 12:39:03,104 - INFO - Using container node-exporter for disk usage check in pod node-exporter-48qtz
2025-04-15 12:39:03,194 - INFO - Metrics saved for pod node-exporter-48qtz in namespace monitoring
2025-04-15 12:39:03,283 - INFO - Port information saved for pod node-exporter-5bd2g
2025-04-15 12:39:03,381 - INFO - Using container node-exporter for disk usage check in pod node-exporter-5bd2g
2025-04-15 12:39:03,465 - INFO - Metrics saved for pod node-exporter-5bd2g in namespace monitoring
2025-04-15 12:39:03,605 - INFO - Port information saved for pod node-exporter-zqtjl
2025-04-15 12:39:03,627 - INFO - Using container node-exporter for disk usage check in pod node-exporter-zqtjl
2025-04-15 12:39:03,854 - INFO - Metrics saved for pod node-exporter-zqtjl in namespace monitoring
2025-04-15 12:39:04,037 - INFO - Port information saved for pod prometheus-k8s-0
2025-04-15 12:39:04,425 - INFO - Node statistics saved for 3 nodes
2025-04-15 12:41:15,517 - INFO - 10.244.0.0 - - [15/Apr/2025 12:41:15] "GET /api/history?days=7 HTTP/1.1" 200 -
2025-04-15 12:41:16,109 - ERROR - Query execution failed: INSERT INTO pod_ports (
                            pod_name, namespace, port_number, protocol,
                            is_exposed, service_name, external_ip
                        ) VALUES (?, ?, ?, ?, ?, ?, ?)
Error: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:41:16,109 - ERROR - Error saving pod ports: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:41:16,109 - ERROR - Error getting port information: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:41:16,139 - INFO - Node statistics saved for 3 nodes
2025-04-15 12:41:16,143 - INFO - 10.244.0.0 - - [15/Apr/2025 12:41:16] "GET /api/nodes HTTP/1.1" 200 -
2025-04-15 12:41:16,208 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-6pmlr
2025-04-15 12:41:16,320 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:41:16,370 - INFO - Using container blackbox-exporter for disk usage check in pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:41:16,739 - INFO - Metrics saved for pod blackbox-exporter-7645c7c966-drsjx in namespace monitoring
2025-04-15 12:41:16,848 - INFO - Port information saved for pod dpl-podmon-667d4dc94-zxkfr
2025-04-15 12:41:16,904 - INFO - Using container podmon-monitor for disk usage check in pod dpl-podmon-667d4dc94-zxkfr
2025-04-15 12:41:16,989 - INFO - Metrics saved for pod dpl-podmon-667d4dc94-zxkfr in namespace monitoring
2025-04-15 12:41:17,135 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-8xcq5
2025-04-15 12:41:17,284 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:41:17,300 - INFO - Using container kube-state-metrics for disk usage check in pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:41:17,377 - WARNING - Invalid or empty disk usage data from pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:41:17,388 - INFO - Metrics saved for pod kube-state-metrics-66f58b585d-qvzh5 in namespace monitoring
2025-04-15 12:41:17,475 - INFO - Port information saved for pod node-exporter-48qtz
2025-04-15 12:41:17,493 - INFO - Using container node-exporter for disk usage check in pod node-exporter-48qtz
2025-04-15 12:41:17,576 - INFO - Metrics saved for pod node-exporter-48qtz in namespace monitoring
2025-04-15 12:41:17,662 - INFO - Port information saved for pod node-exporter-5bd2g
2025-04-15 12:41:17,679 - INFO - Using container node-exporter for disk usage check in pod node-exporter-5bd2g
2025-04-15 12:41:17,760 - INFO - Metrics saved for pod node-exporter-5bd2g in namespace monitoring
2025-04-15 12:41:17,858 - INFO - Port information saved for pod node-exporter-zqtjl
2025-04-15 12:41:17,874 - INFO - Using container node-exporter for disk usage check in pod node-exporter-zqtjl
2025-04-15 12:41:18,091 - INFO - Metrics saved for pod node-exporter-zqtjl in namespace monitoring
2025-04-15 12:41:18,192 - INFO - Port information saved for pod prometheus-k8s-0
2025-04-15 12:41:18,249 - INFO - 10.244.0.0 - - [15/Apr/2025 12:41:18] "GET /api/pods HTTP/1.1" 200 -
2025-04-15 12:41:36,953 - INFO - 10.244.0.0 - - [15/Apr/2025 12:41:36] "GET / HTTP/1.1" 200 -
2025-04-15 12:41:37,022 - INFO - 10.244.0.0 - - [15/Apr/2025 12:41:37] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-04-15 12:41:37,024 - INFO - 10.244.0.0 - - [15/Apr/2025 12:41:37] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-04-15 12:41:37,191 - INFO - 10.244.0.0 - - [15/Apr/2025 12:41:37] "GET /api/config HTTP/1.1" 200 -
2025-04-15 12:41:37,386 - INFO - 10.244.0.0 - - [15/Apr/2025 12:41:37] "GET /api/history?days=7 HTTP/1.1" 200 -
2025-04-15 12:41:37,923 - ERROR - Query execution failed: INSERT INTO pod_ports (
                            pod_name, namespace, port_number, protocol,
                            is_exposed, service_name, external_ip
                        ) VALUES (?, ?, ?, ?, ?, ?, ?)
Error: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:41:37,923 - ERROR - Error saving pod ports: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:41:37,923 - ERROR - Error getting port information: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:41:37,947 - INFO - Node statistics saved for 3 nodes
2025-04-15 12:41:37,951 - INFO - 10.244.0.0 - - [15/Apr/2025 12:41:37] "GET /api/nodes HTTP/1.1" 200 -
2025-04-15 12:41:38,033 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-6pmlr
2025-04-15 12:41:38,151 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:41:38,167 - INFO - Using container blackbox-exporter for disk usage check in pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:41:38,539 - INFO - Metrics saved for pod blackbox-exporter-7645c7c966-drsjx in namespace monitoring
2025-04-15 12:41:38,645 - INFO - Port information saved for pod dpl-podmon-667d4dc94-zxkfr
2025-04-15 12:41:38,664 - INFO - Using container podmon-monitor for disk usage check in pod dpl-podmon-667d4dc94-zxkfr
2025-04-15 12:41:38,746 - INFO - Metrics saved for pod dpl-podmon-667d4dc94-zxkfr in namespace monitoring
2025-04-15 12:41:38,853 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-8xcq5
2025-04-15 12:41:38,965 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:41:39,030 - INFO - Using container kube-state-metrics for disk usage check in pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:41:39,094 - WARNING - Invalid or empty disk usage data from pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:41:39,105 - INFO - Metrics saved for pod kube-state-metrics-66f58b585d-qvzh5 in namespace monitoring
2025-04-15 12:41:39,196 - INFO - Port information saved for pod node-exporter-48qtz
2025-04-15 12:41:39,213 - INFO - Using container node-exporter for disk usage check in pod node-exporter-48qtz
2025-04-15 12:41:39,304 - INFO - Metrics saved for pod node-exporter-48qtz in namespace monitoring
2025-04-15 12:41:39,399 - INFO - Port information saved for pod node-exporter-5bd2g
2025-04-15 12:41:39,415 - INFO - Using container node-exporter for disk usage check in pod node-exporter-5bd2g
2025-04-15 12:41:39,497 - INFO - Metrics saved for pod node-exporter-5bd2g in namespace monitoring
2025-04-15 12:41:39,589 - INFO - Port information saved for pod node-exporter-zqtjl
2025-04-15 12:41:39,617 - INFO - Using container node-exporter for disk usage check in pod node-exporter-zqtjl
2025-04-15 12:41:39,891 - INFO - Metrics saved for pod node-exporter-zqtjl in namespace monitoring
2025-04-15 12:41:40,000 - INFO - Port information saved for pod prometheus-k8s-0
2025-04-15 12:41:40,061 - INFO - 10.244.0.0 - - [15/Apr/2025 12:41:40] "GET /api/pods HTTP/1.1" 200 -
2025-04-15 12:41:40,076 - ERROR - Unhandled error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
2025-04-15 12:41:40,076 - INFO - 10.244.0.0 - - [15/Apr/2025 12:41:40] "[35m[1mGET /api/storage/info HTTP/1.1[0m" 500 -
2025-04-15 12:42:56,640 - ERROR - Erro ao enviar alerta: name 'subject' is not defined
2025-04-15 12:42:56,682 - INFO - Successfully connected to Kubernetes API
2025-04-15 12:42:56,897 - INFO - Database setup completed successfully
2025-04-15 12:42:56,898 - INFO - Database connection verified
2025-04-15 12:42:56,898 - INFO - Database initialized successfully
2025-04-15 12:42:56,911 - INFO - Scheduled automatic cleanup with 30 days retention
2025-04-15 12:42:56,911 - INFO - PodMonitor initialized successfully
2025-04-15 12:42:56,914 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.244.1.63:5000
2025-04-15 12:42:56,914 - INFO - [33mPress CTRL+C to quit[0m
2025-04-15 12:42:57,287 - ERROR - Query execution failed: INSERT INTO pod_ports (
                            pod_name, namespace, port_number, protocol,
                            is_exposed, service_name, external_ip
                        ) VALUES (?, ?, ?, ?, ?, ?, ?)
Error: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:42:57,287 - ERROR - Error saving pod ports: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:42:57,287 - ERROR - Error getting port information: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:42:57,411 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-6pmlr
2025-04-15 12:42:57,561 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:42:57,577 - INFO - Using container blackbox-exporter for disk usage check in pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:42:58,041 - INFO - Metrics saved for pod blackbox-exporter-7645c7c966-drsjx in namespace monitoring
2025-04-15 12:42:58,398 - INFO - Port information saved for pod dpl-podmon-86c7468b98-gpz5q
2025-04-15 12:42:58,412 - INFO - Using container podmon-monitor for disk usage check in pod dpl-podmon-86c7468b98-gpz5q
2025-04-15 12:42:58,576 - INFO - Metrics saved for pod dpl-podmon-86c7468b98-gpz5q in namespace monitoring
2025-04-15 12:42:58,684 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-8xcq5
2025-04-15 12:42:58,807 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:42:58,830 - INFO - Using container kube-state-metrics for disk usage check in pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:42:58,910 - WARNING - Invalid or empty disk usage data from pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:42:58,921 - INFO - Metrics saved for pod kube-state-metrics-66f58b585d-qvzh5 in namespace monitoring
2025-04-15 12:42:59,026 - INFO - Port information saved for pod node-exporter-48qtz
2025-04-15 12:42:59,043 - INFO - Using container node-exporter for disk usage check in pod node-exporter-48qtz
2025-04-15 12:42:59,126 - INFO - Metrics saved for pod node-exporter-48qtz in namespace monitoring
2025-04-15 12:42:59,231 - INFO - Port information saved for pod node-exporter-5bd2g
2025-04-15 12:42:59,249 - INFO - Using container node-exporter for disk usage check in pod node-exporter-5bd2g
2025-04-15 12:42:59,331 - INFO - Metrics saved for pod node-exporter-5bd2g in namespace monitoring
2025-04-15 12:42:59,423 - INFO - Port information saved for pod node-exporter-zqtjl
2025-04-15 12:42:59,488 - INFO - Using container node-exporter for disk usage check in pod node-exporter-zqtjl
2025-04-15 12:42:59,688 - INFO - Metrics saved for pod node-exporter-zqtjl in namespace monitoring
2025-04-15 12:42:59,804 - INFO - Port information saved for pod prometheus-k8s-0
2025-04-15 12:43:00,231 - INFO - Node statistics saved for 3 nodes
2025-04-15 12:43:02,245 - ERROR - Erro ao monitorar sistema PodMon: 'Database' object has no attribute 'save_system_metrics'
2025-04-15 12:51:37,473 - INFO - 10.244.0.0 - - [15/Apr/2025 12:51:37] "GET /api/history?days=7 HTTP/1.1" 200 -
2025-04-15 12:51:38,034 - ERROR - Query execution failed: INSERT INTO pod_ports (
                            pod_name, namespace, port_number, protocol,
                            is_exposed, service_name, external_ip
                        ) VALUES (?, ?, ?, ?, ?, ?, ?)
Error: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:51:38,045 - ERROR - Error saving pod ports: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:51:38,050 - ERROR - Error getting port information: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:51:38,937 - INFO - Node statistics saved for 3 nodes
2025-04-15 12:51:38,941 - INFO - 10.244.0.0 - - [15/Apr/2025 12:51:38] "GET /api/nodes HTTP/1.1" 200 -
2025-04-15 12:51:38,979 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-6pmlr
2025-04-15 12:51:39,105 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:51:39,122 - INFO - Using container blackbox-exporter for disk usage check in pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:51:39,440 - INFO - Metrics saved for pod blackbox-exporter-7645c7c966-drsjx in namespace monitoring
2025-04-15 12:51:39,549 - INFO - Port information saved for pod dpl-podmon-86c7468b98-gpz5q
2025-04-15 12:51:39,568 - INFO - Using container podmon-monitor for disk usage check in pod dpl-podmon-86c7468b98-gpz5q
2025-04-15 12:51:39,701 - INFO - Metrics saved for pod dpl-podmon-86c7468b98-gpz5q in namespace monitoring
2025-04-15 12:51:39,807 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-8xcq5
2025-04-15 12:51:39,928 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:51:39,945 - INFO - Using container kube-state-metrics for disk usage check in pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:51:40,038 - WARNING - Invalid or empty disk usage data from pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:51:40,049 - INFO - Metrics saved for pod kube-state-metrics-66f58b585d-qvzh5 in namespace monitoring
2025-04-15 12:51:40,186 - INFO - Port information saved for pod node-exporter-48qtz
2025-04-15 12:51:40,204 - INFO - Using container node-exporter for disk usage check in pod node-exporter-48qtz
2025-04-15 12:51:40,291 - INFO - Metrics saved for pod node-exporter-48qtz in namespace monitoring
2025-04-15 12:51:40,389 - INFO - Port information saved for pod node-exporter-5bd2g
2025-04-15 12:51:40,407 - INFO - Using container node-exporter for disk usage check in pod node-exporter-5bd2g
2025-04-15 12:51:40,573 - INFO - Metrics saved for pod node-exporter-5bd2g in namespace monitoring
2025-04-15 12:51:40,666 - INFO - Port information saved for pod node-exporter-zqtjl
2025-04-15 12:51:40,682 - INFO - Using container node-exporter for disk usage check in pod node-exporter-zqtjl
2025-04-15 12:51:40,826 - INFO - Metrics saved for pod node-exporter-zqtjl in namespace monitoring
2025-04-15 12:51:40,930 - INFO - Port information saved for pod prometheus-k8s-0
2025-04-15 12:51:40,994 - INFO - 10.244.0.0 - - [15/Apr/2025 12:51:40] "GET /api/pods HTTP/1.1" 200 -
2025-04-15 12:53:02,591 - ERROR - Query execution failed: INSERT INTO pod_ports (
                            pod_name, namespace, port_number, protocol,
                            is_exposed, service_name, external_ip
                        ) VALUES (?, ?, ?, ?, ?, ?, ?)
Error: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:53:02,592 - ERROR - Error saving pod ports: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:53:02,592 - ERROR - Error getting port information: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:53:02,751 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-6pmlr
2025-04-15 12:53:02,891 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:53:02,959 - INFO - Using container blackbox-exporter for disk usage check in pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:53:03,240 - INFO - Metrics saved for pod blackbox-exporter-7645c7c966-drsjx in namespace monitoring
2025-04-15 12:53:03,346 - INFO - Port information saved for pod dpl-podmon-86c7468b98-gpz5q
2025-04-15 12:53:03,364 - INFO - Using container podmon-monitor for disk usage check in pod dpl-podmon-86c7468b98-gpz5q
2025-04-15 12:53:03,452 - INFO - Metrics saved for pod dpl-podmon-86c7468b98-gpz5q in namespace monitoring
2025-04-15 12:53:03,562 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-8xcq5
2025-04-15 12:53:03,693 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:53:03,717 - INFO - Using container kube-state-metrics for disk usage check in pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:53:03,836 - WARNING - Invalid or empty disk usage data from pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:53:03,847 - INFO - Metrics saved for pod kube-state-metrics-66f58b585d-qvzh5 in namespace monitoring
2025-04-15 12:53:03,934 - INFO - Port information saved for pod node-exporter-48qtz
2025-04-15 12:53:03,947 - INFO - Using container node-exporter for disk usage check in pod node-exporter-48qtz
2025-04-15 12:53:04,012 - INFO - Metrics saved for pod node-exporter-48qtz in namespace monitoring
2025-04-15 12:53:04,102 - INFO - Port information saved for pod node-exporter-5bd2g
2025-04-15 12:53:04,122 - INFO - Using container node-exporter for disk usage check in pod node-exporter-5bd2g
2025-04-15 12:53:04,212 - INFO - Metrics saved for pod node-exporter-5bd2g in namespace monitoring
2025-04-15 12:53:04,590 - INFO - Port information saved for pod node-exporter-zqtjl
2025-04-15 12:53:04,609 - INFO - Using container node-exporter for disk usage check in pod node-exporter-zqtjl
2025-04-15 12:53:04,888 - INFO - Metrics saved for pod node-exporter-zqtjl in namespace monitoring
2025-04-15 12:53:04,997 - INFO - Port information saved for pod prometheus-k8s-0
2025-04-15 12:53:05,388 - INFO - Node statistics saved for 3 nodes
2025-04-15 12:53:07,400 - ERROR - Erro ao monitorar sistema PodMon: 'Database' object has no attribute 'save_system_metrics'
2025-04-15 12:57:37,526 - ERROR - Erro ao enviar alerta: name 'subject' is not defined
2025-04-15 12:57:37,565 - INFO - Successfully connected to Kubernetes API
2025-04-15 12:57:37,772 - INFO - Database setup completed successfully
2025-04-15 12:57:37,773 - INFO - Database connection verified
2025-04-15 12:57:37,773 - INFO - Database initialized successfully
2025-04-15 12:57:37,785 - INFO - Scheduled automatic cleanup with 30 days retention
2025-04-15 12:57:37,785 - INFO - PodMonitor initialized successfully
2025-04-15 12:57:37,788 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.244.1.64:5000
2025-04-15 12:57:37,788 - INFO - [33mPress CTRL+C to quit[0m
2025-04-15 12:57:38,146 - ERROR - Query execution failed: INSERT INTO pod_ports (
                            pod_name, namespace, port_number, protocol,
                            is_exposed, service_name, external_ip
                        ) VALUES (?, ?, ?, ?, ?, ?, ?)
Error: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:57:38,146 - ERROR - Error saving pod ports: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:57:38,146 - ERROR - Error getting port information: UNIQUE constraint failed: pod_ports.pod_name, pod_ports.namespace, pod_ports.port_number
2025-04-15 12:57:38,268 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-6pmlr
2025-04-15 12:57:38,390 - INFO - Port information saved for pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:57:38,406 - INFO - Using container blackbox-exporter for disk usage check in pod blackbox-exporter-7645c7c966-drsjx
2025-04-15 12:57:38,739 - INFO - Metrics saved for pod blackbox-exporter-7645c7c966-drsjx in namespace monitoring
2025-04-15 12:57:38,848 - INFO - Port information saved for pod dpl-podmon-667d4dc94-7xjh2
2025-04-15 12:57:38,865 - INFO - Using container podmon-monitor for disk usage check in pod dpl-podmon-667d4dc94-7xjh2
2025-04-15 12:57:38,948 - INFO - Metrics saved for pod dpl-podmon-667d4dc94-7xjh2 in namespace monitoring
2025-04-15 12:57:39,059 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-8xcq5
2025-04-15 12:57:39,176 - INFO - Port information saved for pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:57:39,193 - INFO - Using container kube-state-metrics for disk usage check in pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:57:39,384 - WARNING - Invalid or empty disk usage data from pod kube-state-metrics-66f58b585d-qvzh5
2025-04-15 12:57:39,395 - INFO - Metrics saved for pod kube-state-metrics-66f58b585d-qvzh5 in namespace monitoring
2025-04-15 12:57:39,495 - INFO - Port information saved for pod node-exporter-48qtz
2025-04-15 12:57:39,511 - INFO - Using container node-exporter for disk usage check in pod node-exporter-48qtz
2025-04-15 12:57:39,597 - INFO - Metrics saved for pod node-exporter-48qtz in namespace monitoring
2025-04-15 12:57:39,687 - INFO - Port information saved for pod node-exporter-5bd2g
2025-04-15 12:57:39,704 - INFO - Using container node-exporter for disk usage check in pod node-exporter-5bd2g
2025-04-15 12:57:39,790 - INFO - Metrics saved for pod node-exporter-5bd2g in namespace monitoring
2025-04-15 12:57:39,887 - INFO - Port information saved for pod node-exporter-zqtjl
2025-04-15 12:57:39,904 - INFO - Using container node-exporter for disk usage check in pod node-exporter-zqtjl
2025-04-15 12:57:40,188 - INFO - Metrics saved for pod node-exporter-zqtjl in namespace monitoring
2025-04-15 12:57:40,394 - INFO - Port information saved for pod prometheus-k8s-0
2025-04-15 12:57:40,830 - INFO - Node statistics saved for 3 nodes
2025-04-15 12:57:42,844 - ERROR - Erro ao monitorar sistema PodMon: 'Database' object has no attribute 'save_system_metrics'
