<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="PodMon - Advanced Kubernetes Monitoring System">
    <meta name="author" content="russorafael">
    <meta name="version" content="2.0.0">
    <meta http-equiv="refresh" content="600">
    <title>PodMon - Kubernetes Monitoring System</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Navigation Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">PodMon</h1>
                <span class="tagline">K8s Monitor</span>
            </div>
            
            <nav class="nav-menu">
                <div class="nav-section">
                    <button class="tab-button active" data-tab="dashboard">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </button>
                </div>

                <div class="nav-section">
                    <div class="nav-section-header">
                        <span>Monitoring</span>
                    </div>
                    <button class="tab-button" data-tab="pods-view">
                        <i class="fas fa-cube"></i> Pods View
                    </button>
                    <button class="tab-button" data-tab="nodes-view">
                        <i class="fas fa-server"></i> Nodes View
                    </button>
                    <button class="tab-button" data-tab="resources">
                        <i class="fas fa-microchip"></i> Resources
                    </button>
                </div>

                <div class="nav-section">
                    <div class="nav-section-header">
                        <span>History</span>
                    </div>
                    <button class="tab-button" data-tab="pod-history">
                        <i class="fas fa-history"></i> Pod History
                    </button>
                    <button class="tab-button" data-tab="node-history">
                        <i class="fas fa-network-wired"></i> Node History
                    </button>
                </div>

                <div class="nav-section">
                    <div class="nav-section-header">
                        <span>Settings</span>
                    </div>
                    <button class="tab-button" data-tab="email-settings">
                        <i class="fas fa-envelope"></i> Email Settings
                    </button>
                    <button class="tab-button" data-tab="whatsapp-settings">
                        <i class="fab fa-whatsapp"></i> WhatsApp Settings
                    </button>
                    <button class="tab-button" data-tab="monitor-settings">
                        <i class="fas fa-cogs"></i> Monitor Settings
                    </button>
                    <button class="tab-button" data-tab="cleanup-settings">
                        <i class="fas fa-broom"></i> Cleanup Settings
                    </button>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="theme-toggle-container">
                    <label class="switch" for="theme-toggle">
                        <span class="theme-label">Dark Mode</span>
                        <input type="checkbox" id="theme-toggle">
                        <span class="slider round"></span>
                    </label>
                </div>
                <div class="version-info">
                    <span>Version 2.0.0</span>
                </div>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <header class="top-header">
                <div class="header-title">
                    <h2 id="current-tab-title">Dashboard</h2>
                </div>
                <div class="header-actions">
                    <span id="last-update" class="last-update">Last update: Never</span>
                    <button id="check-now-btn" class="primary-btn">
                        <i class="fas fa-sync-alt"></i> Check Now
                    </button>
                </div>
            </header>
            
            <!-- Notification Container -->
            <div id="notification-container"></div>

            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard">
                <div class="dashboard-grid">
                    <!-- Statistics Cards -->
                    <div class="stats-section">
                        <div class="stats-row">
                            <a href="#pods-view" class="stat-card clickable">
                                <div class="stat-icon total-pods-icon">
                                    <i class="fas fa-cube"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Total Pods</h3>
                                    <p id="total-pods">0</p>
                                </div>
                            </a>
                            
                            <a href="#pods-view?status=running" class="stat-card clickable">
                                <div class="stat-icon active-pods-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Active Pods</h3>
                                    <p id="active-pods">0</p>
                                </div>
                            </a>
                            
                            <a href="#pods-view?status=failed" class="stat-card clickable">
                                <div class="stat-icon failed-pods-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Failed Pods</h3>
                                    <p id="failed-pods">0</p>
                                </div>
                            </a>
                        </div>
                        
                        <div class="stats-row">
                            <a href="#nodes-view" class="stat-card clickable">
                                <div class="stat-icon total-nodes-icon">
                                    <i class="fas fa-server"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Total Nodes</h3>
                                    <p id="total-nodes">0</p>
                                </div>
                            </a>
                            
                            <a href="#nodes-view?status=ready" class="stat-card clickable">
                                <div class="stat-icon active-nodes-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Active Nodes</h3>
                                    <p id="active-nodes">0</p>
                                </div>
                            </a>
                            
                            <a href="#nodes-view?status=notready" class="stat-card clickable">
                                <div class="stat-icon failed-nodes-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Failed Nodes</h3>
                                    <p id="failed-nodes">0</p>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- Recently Restarted Pods Section -->
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h3><i class="fas fa-redo"></i> Recently Restarted Pods (Last 7 Days)</h3>
                        </div>
                        <div class="section-content" id="recently-restarted-pods">
                            <div class="data-table-wrapper">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Pod Name</th>
                                            <th>Namespace</th>
                                            <th>Node</th>
                                            <th>Restart Time</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="loading-row">
                                            <td colspan="5">Loading data...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Updated Images Section -->
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h3><i class="fas fa-images"></i> Recently Updated Images (Last 7 Days)</h3>
                        </div>
                        <div class="section-content" id="updated-images">
                            <div class="data-table-wrapper">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Pod Name</th>
                                            <th>Image</th>
                                            <th>Update Time</th>
                                            <th>Previous Version</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="loading-row">
                                            <td colspan="4">Loading data...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Pods by Node Distribution -->
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h3><i class="fas fa-server"></i> Pods Distribution by Node</h3>
                        </div>
                        <div class="section-content" id="pods-distribution">
                            <div class="data-table-wrapper">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Node Name</th>
                                            <th>Total Pods</th>
                                            <th>Active Pods</th>
                                            <th>Failed Pods</th>
                                            <th>Resource Usage</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="loading-row">
                                            <td colspan="5">Loading data...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pods View Tab -->
            <div class="tab-content" id="pods-view" style="display: none;">
                <div class="filters-bar">
                    <div class="filters-group">
                        <select id="namespace-filter" class="auto-update">
                            <option value="">All Namespaces</option>
                        </select>
                        <select id="node-filter" class="auto-update">
                            <option value="">All Nodes</option>
                        </select>
                        <select id="status-filter" class="auto-update">
                            <option value="">All Statuses</option>
                            <option value="Running">Running</option>
                            <option value="Failed">Failed</option>
                            <option value="Pending">Pending</option>
                        </select>
                        <select id="type-filter" class="auto-update">
                            <option value="">All Types</option>
                            <option value="local">Local Pods</option>
                            <option value="system">System Pods</option>
                        </select>
                    </div>
                    <div class="search-group">
                        <input type="text" id="pod-search" placeholder="Search pods..." class="search-input">
                    </div>
                </div>

                <div class="pods-grid" id="pods-grid">
                    <!-- Pod cards will be dynamically inserted here -->
                    <div class="loading">Loading pods data...</div>
                </div>
            </div>

            <!-- Pod Details Modal -->
            <div id="pod-details-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Pod Details</h2>
                        <button class="close-modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="pod-info-tabs">
                            <button class="tab-btn active" data-tab="general">General</button>
                            <button class="tab-btn" data-tab="resources">Resources</button>
                            <button class="tab-btn" data-tab="network">Network</button>
                            <button class="tab-btn" data-tab="events">Events</button>
                        </div>

                        <div class="pod-info-content">
                            <!-- General Info Tab -->
                            <div class="tab-pane active" id="general-tab">
                                <div class="info-group">
                                    <h3>Pod Information</h3>
                                    <div class="info-row">
                                        <span class="label">Name:</span>
                                        <span id="pod-name"></span>
                                        <span id="new-pod-badge" class="badge" style="display: none;">NEW</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="label">Namespace:</span>
                                        <span id="pod-namespace"></span>
                                    </div>
                                    <div class="info-row">
                                        <span class="label">Status:</span>
                                        <span id="pod-status"></span>
                                    </div>
                                    <div class="info-row">
                                        <span class="label">Node:</span>
                                        <span id="pod-node"></span>
                                    </div>
                                    <div class="info-row">
                                        <span class="label">Created:</span>
                                        <span id="pod-created"></span>
                                    </div>
                                </div>

                                <div class="info-group">
                                    <h3>Image Information</h3>
                                    <div class="info-row">
                                        <span class="label">Image:</span>
                                        <span id="pod-image"></span>
                                        <i id="updated-image-star" class="fas fa-star" style="display: none;" title="Updated in last 7 days"></i>
                                    </div>
                                </div>
                            </div>

                            <!-- Resources Tab -->
                            <div class="tab-pane" id="resources-tab">
                                <div class="resource-charts">
                                    <div class="chart-container">
                                        <h4>CPU Usage</h4>
                                        <canvas id="cpu-chart"></canvas>
                                    </div>
                                    <div class="chart-container">
                                        <h4>Memory Usage</h4>
                                        <canvas id="memory-chart"></canvas>
                                    </div>
                                    <div class="chart-container">
                                        <h4>Disk Usage</h4>
                                        <canvas id="disk-chart"></canvas>
                                    </div>
                                </div>
                            </div>

                            <!-- Network Tab -->
                            <div class="tab-pane" id="network-tab">
                                <div class="info-group">
                                    <h3>Network Information</h3>
                                    <div class="info-row">
                                        <span class="label">External IP:</span>
                                        <span id="pod-external-ip" class="ip-address"></span>
                                        <a id="ssh-link" href="#" class="ssh-link" title="Open SSH Connection">
                                            <i class="fas fa-terminal"></i>
                                        </a>
                                    </div>
                                    <div class="info-row">
                                        <span class="label">Internal IP:</span>
                                        <span id="pod-internal-ip" class="ip-address secondary"></span>
                                    </div>
                                </div>

                                <div class="info-group">
                                    <h3>Open Ports</h3>
                                    <div id="pod-ports" class="ports-grid">
                                        <!-- Ports will be dynamically added here -->
                                    </div>
                                </div>
                            </div>

                            <!-- Events Tab -->
                            <div class="tab-pane" id="events-tab">
                                <div class="events-timeline">
                                    <!-- Events will be dynamically added here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="restart-pod-btn" class="danger-btn">
                            <i class="fas fa-redo"></i> Restart Pod
                        </button>
                        <button class="close-modal-btn">Close</button>
                    </div>
                </div>
            </div>

            <!-- Password Modal for Pod Restart -->
            <div id="password-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Authentication Required</h3>
                        <button class="close-modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="restart-password">Enter password to restart pod:</label>
                            <input type="password" id="restart-password" class="form-control">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="confirm-restart-btn" class="primary-btn">Confirm</button>
                        <button class="cancel-btn">Cancel</button>
                    </div>
                </div>
            </div>

            <!-- [Previous configuration tabs remain the same but translated to English] -->

        </main>
    </div>

    <!-- Last Update Information -->
    <div id="last-update-info" class="last-update-info">
        Last check: <span id="last-check-time">Never</span>
        <br>
        Next check in: <span id="next-check-time">10:00</span>
    </div>

    <!-- Scripts -->
    <script src="/static/js/main.js"></script>
</body>
</html>